# Example test case for debian archive issue
testCase:
  id: "debian-archive-001"
  category: "package"
  description: "Debian packages moved to archive repository"
  
  input:
    buildLog: |
      [Pipeline] stage
      [Pipeline] { (Build Docker Image)
      [Pipeline] sh
      + docker build -t myapp:latest .
      Sending build context to Docker daemon  
      Step 1/10 : FROM debian:stretch
      Step 2/10 : RUN apt-get update && apt-get install -y curl
       ---> Running in 3f4e5d6c7b8a
      Get:1 http://security.debian.org/debian-security stretch/updates InRelease [59.1 kB]
      Ign:2 http://deb.debian.org/debian stretch InRelease
      Ign:3 http://deb.debian.org/debian stretch-updates InRelease
      Ign:4 http://deb.debian.org/debian stretch Release
      Err:7 http://deb.debian.org/debian stretch/main amd64 Packages
        404  Not Found [IP: 151.101.12.204 80]
      Reading package lists...
      E: Failed to fetch http://deb.debian.org/debian/dists/stretch/main/binary-amd64/Packages  404  Not Found [IP: 151.101.12.204 80]
      E: Some index files failed to download. They have been ignored, or old ones used instead.
      The command '/bin/sh -c apt-get update && apt-get install -y curl' returned a non-zero exit code: 100
      ERROR: script returned exit code 1
    
    context:
      jobType: "docker-build"
      environment: "ci"
      dockerfileContent: |
        FROM debian:stretch
        RUN apt-get update && apt-get install -y curl
  
  expectedOutput:
    problematicStep:
      stage: "Build Docker Image"
      command: "docker build -t myapp:latest ."
      lineNumber: 4
      errorCode: 1
      specificError: "apt-get update failed"
    
    rootCause:
      category: "PACKAGE_REPOSITORY_ERROR"
      specificIssue: "Debian Stretch moved to archive repository"
      confidence: 0.95
    
    solutions:
      - rank: 1
        title: "Update Dockerfile to use Debian archive repository"
        confidence: 0.95
        steps:
          - "Update sources.list to use archive.debian.org"
          - "Modify Dockerfile before apt-get update"
        example: |
          FROM debian:stretch
          RUN echo "deb http://archive.debian.org/debian stretch main" > /etc/apt/sources.list && \
              echo "deb http://archive.debian.org/debian-security stretch/updates main" >> /etc/apt/sources.list && \
              apt-get update && apt-get install -y curl
      
      - rank: 2
        title: "Upgrade to a supported Debian version"
        confidence: 0.85
        steps:
          - "Change base image to debian:bullseye or debian:bookworm"
          - "Update any version-specific configurations"
        example: |
          FROM debian:bullseye
          RUN apt-get update && apt-get install -y curl
      
      - rank: 3
        title: "Use a more stable base image"
        confidence: 0.7
        steps:
          - "Consider using Ubuntu LTS or Alpine Linux"
          - "Adjust package names if needed"
        example: |
          FROM ubuntu:22.04
          RUN apt-get update && apt-get install -y curl